<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>忘记密码</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.css">
    <script src="../js/jquery-3.5.1.min.js"></script>
    <style type="text/css">
        .box{
            width: 30%;
            height: 200px;
            margin: auto ;
            margin-top: 100px;
        }
        .m{
            margin-top: 80px;
        }
    </style>
    <script src="../js/jquery.cookie.js"></script>
</head>
<body>

<div class="d-flex mb-3 flex-row ct-bg">
    <div class="box" >
        <div class="text-center text-danger">
            找回密码
        </div>
        <div class="m">
                <input class="user form-control" type="text" name="username" placeholder="输入账号">
                <input class="memo form-control" type="text" name="memo" placeholder="输入密保答案" />
                <input class="pwd form-control" type="text" name="memo" placeholder="新密码" />
                <input type="submit" class="forget btn btn-dark btn-block" />
        </div>
    </div>
</div>
<script>
        $(".forget").on("click",function () {
           var username = $(".user").val();
           var memo = $(".memo").val();
           var pwd = $(".pwd").val();
            if (username.length == 0 || memo.length == 0 || pwd.length == 0){
                alert("账号或密保或新密码不能为空！");
                return;
            }
        $.ajax({
            url : "../forget",
            type : "post",
            data : {
                username:username,
                memo:memo,
                pwd:pwd
            },
            dataType: "json",
            success : function(data){
               if (data.success == 0){
                   alert("账号或密保答案错误！请重新输入！！");
                   return;
               }
               alert("修改密码成功，正在跳转到登录页面");
                window.location.href = data.url;
            }
        });

        });
</script>
</body>
</html>